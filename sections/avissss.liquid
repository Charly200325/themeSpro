{% stylesheet %}
.reviews-carousel {
  background-color: #FBF1E8;
  padding: 86px 0;
}
.reviews-carousel h2 {
  text-align: center;
  font-size: 35px;
  font-family: 'Minerva Modern', serif;
  color: #27201A;
  margin-bottom: 40px;
  letter-spacing: 0.98px;
}
.review-card {
  background: white;
  border-radius: 12px;
  overflow: hidden;
}
.review-image {
  width: 100%;
  height: auto;
  object-fit: cover;
  border-radius: 12px 12px 0 0;
}
.review-content {
  padding: 16px;
  font-size: 16px;
  font-family: 'Hanken Grotesk', sans-serif;
  color: #665E5B;
  line-height: 1.5;
}
.review-name {
  font-style: italic;
  color: #544843;
  margin-top: 8px;
  font-size: 14px;
}
.shade-box {
  background-color: #EFE4D4;
  padding: 10px 16px;
  font-size: 13px;
  color: #665E5B;
  font-family: 'Hanken Grotesk', sans-serif;
  font-weight: 400;
  display: flex;
  align-items: center;
  gap: 8px;
  border-radius: 0 0 12px 12px;
}
.shade-box strong {
  font-weight: 800;
  display: block;
}
.swiper-button-next,
.swiper-button-prev {
  color: #AE9F96;
}
.swiper-pagination-bullet {
  background: #AE9F96;
  opacity: 0.4;
}
.swiper-pagination-bullet-active {
  background: #AE9F96;
  opacity: 1;
}
{% endstylesheet %}

<div class="reviews-carousel">
  <h2>The Reviews Speak For Themselves</h2>

  <div class="swiper reviews-swiper">
    <div class="swiper-wrapper">
      {% for block in section.blocks %}
        {% if block.type == 'review' %}
          <div class="swiper-slide">
            <div class="review-card">
              {% if block.settings.image %}
                <img src="{{ block.settings.image | image_url: width: 600 }}" alt="Review" class="review-image">
              {% endif %}

              <div class="review-content">
                <p>“{{ block.settings.text }}”</p>
                <div class="review-name">{{ block.settings.name }} - {{ block.settings.location }}</div>
              </div>

              <div class="shade-box">
                {% if block.settings.shade_image %}
                  <img src="{{ block.settings.shade_image | image_url: width: 32 }}" alt="Shade" style="width: 32px; height: auto;">
                {% endif %}
                <div>
                  USED<br><strong>{{ block.settings.shade }}</strong>
                </div>
              </div>
            </div>
          </div>
        {% endif %}
      {% endfor %}
    </div>

    <div class="swiper-button-prev"></div>
    <div class="swiper-button-next"></div>
    <div class="swiper-pagination"></div>
  </div>
</div>

{% javascript %}
const swiper = new Swiper('.reviews-swiper', {
  slidesPerView: 1.2,
  spaceBetween: 16,
  loop: true,
  navigation: {
    nextEl: '.swiper-button-next',
    prevEl: '.swiper-button-prev'
  },
  pagination: {
    el: '.swiper-pagination',
    clickable: true
  },
  breakpoints: {
    768: {
      slidesPerView: 2.5,
    },
    1024: {
      slidesPerView: 5,
    }
  }
});
{% endjavascript %}

{% schema %}
{
  "name": "Reviews Carousel",
  "settings": [],
  "blocks": [
    {
      "type": "review",
      "name": "Review Slide",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Customer Image"
        },
        {
          "type": "textarea",
          "id": "text",
          "label": "Review Text"
        },
        {
          "type": "text",
          "id": "name",
          "label": "Customer Name"
        },
        {
          "type": "text",
          "id": "location",
          "label": "Location"
        },
        {
          "type": "text",
          "id": "shade",
          "label": "Shade Used"
        },
        {
          "type": "image_picker",
          "id": "shade_image",
          "label": "Shade Icon"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Reviews Carousel",
      "category": "Testimonials"
    }
  ]
}
{% endschema %}